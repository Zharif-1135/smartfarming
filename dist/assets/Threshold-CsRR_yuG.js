const u=o=>Number.isFinite(o);function l(o,i,r,a=0){if(!u(o)||!u(i)||!u(r))return{f_NH3:NaN,NH3_mgL:NaN};const n=.09018+2729.92/(273.15+r),e=1/(1+Math.pow(10,n-i)),s=o*e;return{f_NH3:e,NH3_mgL:s}}const k={danger:3,warning:2,ok:1,unknown:0},h={kolam:{suhu:{ok:[26,30],warnLow:24,warnHigh:32,units:"°C",note:"Di bawah 24 °C pertumbuhan melambat; di atas 32 °C risiko stres panas meningkat."},ph:{ok:[6.5,9],warnLow:6,warnHigh:9.5,units:"pH"},oksigen:{ok:[5,9],warnLow:3,warnHigh:9,units:"mg/L",note:"Jaga aerasi; DO <3 mg/L berbahaya terutama jelang subuh."},amonia_uia:{ok:[0,.02],warnLow:0,warnHigh:.05,units:"mg/L NH3-N",note:"NH3 ≥0.05 mg/L mulai merusak insang; ≥0.2 mg/L berbahaya, ≥1 mg/L sangat berbahaya."},amonia_total:{ok:[0,.5],warnLow:0,warnHigh:1,units:"mg/L TAN",note:"Gunakan klasifikasi UIA jika memungkinkan (butuh pH & suhu) untuk akurasi."}},hidroponik:{ph:{ok:[5.5,6.5],warnLow:5,warnHigh:7,units:"pH"},suhu:{ok:[18,25],warnLow:16,warnHigh:28,units:"°C",note:"Larutan terlalu hangat menurunkan O2 terlarut & naikan risiko Pythium/akar busuk."},ec:{ok:[1.2,2.5],warnLow:.8,warnHigh:3,units:"mS/cm",note:"Sesuaikan per tanaman; lihat tabel spesifik varietas untuk presisi."},kelembaban:{ok:[50,70],warnLow:40,warnHigh:80,units:"%RH",note:"RH tinggi + suhu tinggi meningkatkan rasa panas & risiko penyakit pernafasan."},intensitas_cahaya:{ok:[1e4,2e4],warnLow:8e3,warnHigh:3e4,units:"lux",note:"Sesuaikan fase/jenis. Layer sering 10–30 lux; brooding 20+; grow 5–10."}},kandang:{suhu:{ok:[20,27],warnLow:18,warnHigh:30,units:"°C",note:"Heat stress meningkat >30 °C, terlebih jika RH >75%."},kelembaban:{ok:[50,70],warnLow:40,warnHigh:80,units:"%RH",note:"RH tinggi + suhu tinggi meningkatkan rasa panas & risiko penyakit pernafasan."},amonia:{ok:[0,10],warnLow:0,warnHigh:25,units:"ppm",note:"Target <25 ppm (ketat); >25 ppm berbahaya untuk unggas & pekerja."},intensitas_cahaya:{ok:[5,20],warnLow:3,warnHigh:50,units:"lux",note:"Sesuaikan fase/jenis. Layer sering 10–30 lux; brooding 20+; grow 5–10."}},ulat:{suhu:{ok:[26,28],warnLow:24,warnHigh:30,units:"°C"},ph:{ok:[6.9,7.6],warnLow:6.5,warnHigh:8,units:"pH"},oksigen:{ok:[2.8,5],warnLow:2,warnHigh:null,units:"mg/L"},amonia_total:{ok:[0,1],warnLow:0,warnHigh:3,units:"mg/L TAN"}},usage:{energy:{ok:[0,50],warnLow:0,warnHigh:100,units:"kWh"},water:{ok:[0,500],warnLow:0,warnHigh:1e3,units:"L"},efficiency:{ok:[75,100],warnLow:50,warnHigh:null,units:"%"}}};function w(o,i){if(!o||!u(i))return{level:"unknown"};const[r,a]=o.ok,{warnLow:t,warnHigh:n}=o;return i>=r&&i<=a?{level:"ok"}:t!=null&&i>=t&&i<r?{level:"warning"}:n!=null&&i>a&&i<=n?{level:"warning"}:t!=null&&i<t?{level:"danger"}:n!=null&&i>n?{level:"danger"}:t==null&&i<r?{level:"warning"}:n==null&&i>a?{level:"warning"}:{level:"unknown"}}function H(o,i,r,a={}){const t=h[o]||{};let n=t[i];if(o==="kolam"&&i==="amonia_total"&&u(r)&&u(a==null?void 0:a.ph)&&u(a==null?void 0:a.suhu)){const{NH3_mgL:g}=l(r,a.ph,a.suhu,0);return n=t.amonia_uia,{...w(n,g),message:`NH₃ (UIA) ≈ ${g.toFixed(3)} mg/L dari TAN ${r} mg/L @ pH ${a.ph}, ${a.suhu}°C`,target:`${n.ok[0]}–${n.ok[1]} ${n.units}`,range:n.ok,units:n.units}}const e=w(n,r);o==="kandang"&&i==="suhu"&&u(r)&&u(a==null?void 0:a.kelembaban)&&(r>30&&a.kelembaban>=75?e.level="danger":r>=28&&a.kelembaban>=70&&k[e.level]<k.warning&&(e.level="warning"));const s=(n==null?void 0:n.units)||"";return{...e,message:e.level==="ok"?"Dalam rentang optimal.":e.level==="warning"?"Mendekati batas—perlu antisipasi.":e.level==="danger"?"Di luar batas aman! Tindakan segera diperlukan.":"Data tidak memadai.",target:n?`${n.ok[0]}–${n.ok[1]} ${s}`:"-",range:(n==null?void 0:n.ok)||null,units:s}}export{H as c};
